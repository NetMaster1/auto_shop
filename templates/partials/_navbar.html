{% load static %}


<div class="nav_bar_big_screen">
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">EvvyAuto</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <!-- =======================Rules Modal Trigger===================== -->
        <li class="nav-item rules_trigger">
          <a class="nav-link active rounded-2" aria-current="page" href="#">Правила</a>
        </li>
         <!-- ===========================Rules Modal Body================================= -->
            <div class="outer_modal_rules ff2">
              <div class="hide">
                <div class="rulesModal rounded-5">
                 <img src="{% static 'images/cross.jpg' %}" style="width:2rem;height:2rem;" class="cross" id="cross_rules">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                              <h5 >
                                <strong>Правила </strong>
                                <br><br>
                                Осуществляя покупку в нашем интернет магазине, покупатель соглашается с данными Правилами.
                                В соответствии с данными Правилами доставка товара осуществляется после его оплаты. Доставка осуществляется
                                в пункт выдачи СДЕК, указанный покупателем, на ФИО, указанное покупателем при оформлении заказа.
                                Стоимость доставки включена в стоимость заказа. Стоимость доставки можно узнать перед оформлением заказа при указании пункта выдачи СДЕК.
                              <br><br>
                                Продавец гарантирует возврат денежных средст в случае поломки товара в процессе транспортировки.
                                Возврат денежных средств осуществляется в течение 5 дней с момента подтверждения поломки товара. 
                                Подтверждением поломки товара в процессе транспортировки может служить фотография поломанного товара 
                                в пункте выдачи СДЕК, сделанная покупателем при получении товара и его проверке.
                               <br><br>
                                Транспортировка товара осуществляется в коробках, изготовленных из пятислойного картона марки П32.
                              <br><br>
                                  В остальном взаимодействие между покупателем и продавцом регулируетя Законом РФ о Защите прав потребителей.
                              </h5>
                            </div>
                        </div>
                    </div>
                </div>
              </div>
            </div>
            <!-- =================================End of Modal Body======================================== -->

        <li class="nav-item dropdown contact_trigger ">
            <a class="nav-link active" aria-current="page" href="#">Контакты</a>
         </li>

        <!-- ===========================Modal Body================================= -->
            <div class="outer_modal_contacts ff2">
              <div class="hide">
                <div class="enterContactModal rounded-5">
                 <img src="{% static 'images/cross.jpg' %}" style="width:2rem;height:2rem;"  class='cross' id="cross_contacts" >
                    <div class="modal-dialog">
                        <div class="modal-content">
                            
                              <h5 style="text-align: left;" >
                                e-mail: support@auto-deflector.ru <br>
                                <br>
                                Реквизиты: ИП Винокуров Сергей Николаевич <br>
                                ИНН 526013223435 <br>
                                ОГРНИП 322527500137506
                                ООО «Банк Точка» <br>
                                БИК 044525104 <br>
                                р.с.40802810420000006198
                              </h5>
                 
                  </div>
              </div>
              </div>
           
            </div>
            </div>
            <!-- =================================End of Modal Body======================================== -->
       
          </ul>
      </ul>
          </li>


      <form action="{% url 'search' %}" method="POST" class="d-flex" role="search">
        {% csrf_token %}
        <input class="form-control me-2 search_line_width_smartphone" type="text" name="brand" placeholder="Введите бренд или модель" aria-label="Search"/>
      

        <button type="submit" class="btn btn-sm btn-outline-dark mr-2 mt-1" style="height: 2rem;" id="search_button">Поиск</button>
      </form>


    <a href="{% url 'shopfront' %}">
      <input type="button" value="Очистить" class="btn btn-sm btn-outline-dark mr-2" id="clear_search_button"> 
    </a>

      
{% if request.user.is_authenticated %}

    <a href="{% url 'account_page' user.id %}"  >{{request.user.first_name}} {{request.user.last_name}}</a>

{% else %}
<!-- ============================Login Modal Trigger========================== -->
    <button class="btn btn-sm btn-outline-dark login_trigger mr-5">Войти</button>
<!-- ===============================Login Modal===================================== -->
    <div class="outer_modal_login">
      <div class="hide">
        <div class="enterLoginModal rounded-5">
          <img src="{% static 'images/cross.jpg' %}" style="width:2rem;height:2rem;" class="cross" id="cross_login">
            
          <div class="modal-dialog">
            <div class="modal-content">
                  
    <form action="{% url 'login_user' %}" method='POST' id="login_form">
      {% csrf_token %}
      <div class="form-group">
        <!-- <label for="username">Имя пользователя</label>
        <input type="text" name="username" class="form-control" placeholder="Введите имя пользователя" required> -->
        <label for="username">Электронная почта</label>
        <input type="email" name="username" class="form-control" placeholder="Введите имя пользователя" required>
      </div>
      <div class="form-group">
        <label for="password">Пароль</label>
        <input type="password" name="password" class="form-control" placeholder='Введите пароль' required>
      </div>
      <br>
      <!-- <input type="submit" value="Signin" class="btn btn-info btn-block"> -->
      <input type="submit" value="Войти" class="btn btn-outline-dark btn-block" id="login_button">
  </form>
      </div>
      </div>
      <div class="row mt-5">
      <a href="{% url 'password_recovery_page' %}" id="password_restore_link">Забыли пароль?</a>
      </div>
      </div>
    </div>
    </div>
    <!-- =========================End of Login Modal=========================== -->

<!-- ============================Register Modal Trigger========================== -->
    <button class="btn btn-sm btn-outline-dark register_trigger mr-5">Регистрация</button>
<!-- ===============================Register Modal===================================== -->
    <div class="outer_modal_register">
      <div class="hide">
        <div class="enterRegisterModal rounded-5">
          <img src="{% static 'images/cross.jpg' %}" style="width:2rem;height:2rem;" class="cross" id="cross_register">
            
          <div class="modal-dialog">
            <div class="modal-content">
                  
            <form action="{% url 'register_user' %}" method='POST' id="register_form">
                {% csrf_token %}
                <div class="form-group">
                    <label for="first_name" class="text-black">Имя</label>
                    <input type="text" name="first_name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="last_name" class="text-black">Фамилия</label>
                    <input type="text" name="last_name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="email" class="text-black">Электронная почта</label>
                    <input type="email" name="email" class="form-control" required autocomplete="off"  >
                </div>

                <div class="form-group">
                    <label for="password" class="text-black">Пароль</label>
                    <input type="password" name="password" class="form-control" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="password2" class="text-black">Подтверждение пароля</label>
                    <input type="password" name="password2" class="form-control" required>
                </div>
              
                    <div class="row p-3">
                      <input type="submit" value="Отправить" class="btn btn-outline-primary btn-block">
                    </div>
                 
                
                
            </form>
          </div>
      </div>
      <!-- ================================================================ -->
      </div>
    </div>
    </div>
    <!-- =========================End of Register Modal=========================== -->
  {% endif %}


<a href="{% url 'cart_detail' %}" class="btn btn-primary"><h3><i class="fas fa-cart-plus"></i></h3></a>


    </div>
  </div>
</nav>

</div>


<div class="nav_bar_media_query">
    <div class="my_nav_bar rounded-3">
    
            <div class="evvy_auto_font_media_query">
                <a href="{% url 'shopfront' %}"  >EvvyAuto</a>
            </div>
    
            <div class="search_field">   
                <div class="search_input">
                    <form action="{% url 'search' %}" method="POST" role="search" style="display: flex;  justify-content: end">
                        {% csrf_token %} 
                    <input class="form-control" type="text" name='brand' style="height: 4vh;" placeholder="Введите бренд или модель" aria-label="Search"/>
                </div>
                <div class="search_blank_block"></div>
                <div class="my_nav_bar_button">
                    <button type="submit" class="my_nav_bar_button" id="search_button_media_query">Поиск</button>
                    </form>
                </div>
            </div>
    <!-- ======================Menu Module Trigger============================= -->
        <div class="font_awesome_icon_media_query pr-3" id="six_points">
                <i class="fa-solid fa-grip"></i>
        </div>
    <!-- ===========================End of Menu Module Trigger====================== -->
    <!-- =================================Start of Menu Modal========================= -->
        <div class="menu_module_outer">
            <div class="hide_shopfront">
                <div class="menu_module_inner">

                    <img src="{% static 'images/Cross_edited.png' %}" class="navbar_modal_cross_blue_media_query" style="width:2rem;height:2rem;" id="menu_cross_blue">
                    {% if request.user.is_authenticated %}

                        <div class="item_1" style="color: greenyellow; font-size: 15px;">
                        <a href="{% url 'account_page' user.id %}"  >{{request.user.first_name}} {{request.user.last_name}}</a>
                        </div>
                        <div class="item_1" style="color: greenyellow; font-size: 15px;">
                        <a href="{% url 'logout_user' %}"  >Выйти</a>
                        </div>
                    

                    {% else %}
                    <!-- ============================Login Modal Trigger========================== -->
                    <div class="item_1" style="color: greenyellow; font-size: 15px;">
                        <a href="{% url 'login_page_media_query' %}">Войти</a>
                    </div>
                    


                    <!-- ============================Register Modal Trigger========================== -->
                    <div class="item_2" style="color: greenyellow; font-size: 15px;">
                        <a href="{% url 'register_page_media_query' %}">Регистрация</a>
                    </div>

                    
                    {% endif %}

                    <div class="item_3" style="color: greenyellow; font-size: 15px;">
                        <a href="{% url 'contacts_page_media_query' %}">Контакты</a>
                    </div>
                    <div class="item_4" style="color: greenyellow; font-size: 15px;">
                        <a href="{% url 'rules_page_media_query' %}">Правила</a>
                    </div>
                </div>
            </div>
        </div>
    <!-- ===========================Modal Body================================= -->
    


    </div>
</div>

<script>
//big screen js
const rules_trigger = document.querySelector('.rules_trigger');
const outer_modal_rules = document.querySelector('.outer_modal_rules');
const cross_rules = document.querySelector('#cross_rules');
rules_trigger.addEventListener('click', showRules)
  function showRules () {
          console.log('ok')
          outer_modal_rules.classList.add('openModal')
    }
cross_rules.addEventListener('click', closeRules)
  function closeRules () {
          console.log('ok')
          outer_modal_rules.classList.remove('openModal')
    }



const contact_trigger = document.querySelector('.contact_trigger');
const outer_modal_contacts = document.querySelector('.outer_modal_contacts');
const cross_contacts = document.querySelector('#cross_contacts');
contact_trigger.addEventListener('click',showContacts)
  function showContacts () {
          console.log('ok')
          outer_modal_contacts.classList.add('openModal')
    }
cross_contacts.addEventListener('click', closeContacts)
  function closeContacts () {
          console.log('ok')
          outer_modal_contacts.classList.remove('openModal')
    }


const register_trigger = document.querySelector('.register_trigger');
const outer_modal_register = document.querySelector('.outer_modal_register');
const cross_register = document.querySelector('#cross_register');

if (register_trigger) {
  register_trigger.addEventListener('click',showRegisterForm)
  function showRegisterForm () {
          console.log('ok')
          outer_modal_register.classList.add('openModal')
    }
cross_register.addEventListener('click', closeRegisterForm)
  function closeRegisterForm () {
          console.log('ok')
          outer_modal_register.classList.remove('openModal')
    }

}



const login_trigger = document.querySelector('.login_trigger');
const outer_modal_login = document.querySelector('.outer_modal_login');
const cross_login = document.querySelector('#cross_login');

if (login_trigger) {
  login_trigger.addEventListener('click',showLoginForm)
  function showLoginForm () {
          console.log('ok')
          outer_modal_login.classList.add('openModal')
    }
cross_login.addEventListener('click', closeLoginForm)
  function closeLoginForm () {
          console.log('ok')
          outer_modal_login.classList.remove('openModal')
    }

}











//media query js
const six_points = document.querySelector('#six_points');
const menu_module_outer = document.querySelector('.menu_module_outer');
const menu_cross_blue = document.querySelector('#menu_cross_blue');



 
  six_points.addEventListener('click', showMenu)
  function showMenu () {
          console.log('ok')
          menu_module_outer.classList.add('openModal')
    }
  menu_cross_blue.addEventListener('click', closeMenu)
  function closeMenu () {
          console.log('ok')
          menu_module_outer.classList.remove('openModal')
    }

 

</script>